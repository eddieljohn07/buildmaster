<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buildmaster</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Encode+Sans+Expanded:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
</head>
<style>
    body {
        background: url(images/bg.webp);
        background-size: cover;
        margin: 0;
        overflow: hidden;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .container {
        position: relative;
        width: 80%;
        height: 80%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }
    .square {
        width: 15em;
        height: 15em;
        box-sizing: border-box;
        margin: 1em;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 0;
    }
    .square img {
        height: 100%;
    }
    #circle {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 1;
    }
    #circle img {
        width: 100%;
        border-radius: 50%;
    }
    #message-box {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        display: none;
        background-color: rgba(0, 0, 0, 0.7);
        color: white;
        padding: 20px;
        text-align: center;
        z-index: 2;
        font-size: 1em;
    }
    #button-container {
        position: absolute;
        bottom: 20px;
        display: flex;
        flex-direction: column;
        align-items: center;
    }
    .down-but {
        display: flex;
    }
    .button {
        width: 2em;
        height: 2em;
        background-color: rgb(230, 230, 230);
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 24px;
        color: white;
        border-radius: 50%;
        margin: 5px;
        cursor: pointer;
    }
    .button:hover {
        background-color: rgb(135, 22, 241);
    }

    .squares-container {
        height: 100vh;
        margin: 0;
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
    }
    .data-img {
        max-height: 30em;
        max-width: 90%;
    }
</style>
<body>
    <div class="container">
        <div id="circle">
            <img src="images/sprite.gif">
        </div>
        <div class="squares-container" id="squares-container-top">
            <div class="square" data-message="<iframe width='100%' height='700px' src='https://www.youtube.com/embed/Mmq_fASrTB4?si=Be7UcgCtCkXW5BvE' title='YouTube video player' frameborder='0' allow='accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share' referrerpolicy='strict-origin-when-cross-origin' allowfullscreen></iframe>">
                <img src="images/tv.webp">
            </div>
        </div>
    </div>
    <audio loop autoplay>
        <source src="sound/bgSound.mp3" type="audio/mpeg">
    </audio>
    <div id="message-box"></div>
    <div id="button-container">
        <div class="up-but">
            <div class="button" id="up"><?xml version="1.0" encoding="utf-8"?><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="40px" height="40px" viewBox="0 0 122.883 122.882" enable-background="new 0 0 122.883 122.882" xml:space="preserve"><g><path d="M0,61.441L0,61.441h0.018c0,16.976,6.872,32.335,17.98,43.443c11.108,11.107,26.467,17.979,43.441,17.979v0.018h0.001 h0.001v-0.018c16.974,0,32.335-6.872,43.443-17.98s17.98-26.467,17.98-43.441h0.018v-0.001V61.44h-0.018 c0-16.975-6.873-32.334-17.98-43.443C93.775,6.89,78.418,0.018,61.443,0.018V0h-0.002l0,0v0.018 c-16.975,0-32.335,6.872-43.443,17.98C6.89,29.106,0.018,44.465,0.018,61.439H0V61.441L0,61.441z M42.48,71.7 c-1.962,1.908-5.101,1.865-7.009-0.098c-1.909-1.962-1.865-5.101,0.097-7.009l22.521-21.839l3.456,3.553l-3.46-3.569 c1.971-1.911,5.117-1.862,7.029,0.108c0.055,0.058,0.109,0.115,0.16,0.175L87.33,64.594c1.963,1.908,2.006,5.047,0.098,7.009 c-1.908,1.963-5.047,2.006-7.01,0.098L61.53,53.227L42.48,71.7L42.48,71.7z"/></g></svg></div>
        </div>
        <div class="down-but">
            <div class="button" id="left"><?xml version="1.0" encoding="utf-8"?><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="40x" height="40px" viewBox="0 0 122.883 122.882" enable-background="new 0 0 122.883 122.882" xml:space="preserve"><g><path d="M61.441,0L61.441,0l0.001,0.018c16.974,0,32.335,6.872,43.443,17.98s17.98,26.467,17.98,43.441h0.018v0.002l0,0h-0.018 c0,16.976-6.873,32.335-17.98,43.443c-11.109,11.107-26.467,17.979-43.442,17.979v0.018h-0.002l0,0v-0.018 c-16.975,0-32.335-6.872-43.443-17.98C6.89,93.775,0.018,78.417,0.018,61.442H0v-0.001V61.44h0.018 c0-16.975,6.872-32.334,17.98-43.443C29.106,6.89,44.465,0.018,61.44,0.018L61.441,0L61.441,0L61.441,0z M71.701,42.48 c1.908-1.962,1.863-5.101-0.098-7.009c-1.963-1.909-5.102-1.865-7.01,0.097L42.755,58.088l3.553,3.456l-3.568-3.46 c-1.911,1.971-1.863,5.118,0.108,7.029c0.058,0.056,0.116,0.109,0.175,0.162l21.571,22.057c1.908,1.962,5.047,2.006,7.01,0.097 c1.961-1.908,2.006-5.047,0.098-7.01L53.227,61.529L71.701,42.48L71.701,42.48z"/></g></svg></div>
            <div class="button" id="down"><?xml version="1.0" encoding="utf-8"?><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="40px" height="40px" viewBox="0 0 122.883 122.882" enable-background="new 0 0 122.883 122.882" xml:space="preserve"><g><path d="M0,61.441L0,61.441l0.018-0.001c0-16.975,6.872-32.334,17.98-43.443C29.106,6.89,44.465,0.018,61.44,0.018V0h0.001h0.001 v0.018c16.974,0,32.335,6.872,43.443,17.98s17.98,26.467,17.98,43.441h0.018v0.002l0,0h-0.018c0,16.976-6.873,32.335-17.98,43.443 c-11.109,11.107-26.467,17.979-43.442,17.979v0.018h-0.002l0,0v-0.018c-16.975,0-32.335-6.872-43.443-17.98 C6.89,93.775,0.018,78.417,0.018,61.442L0,61.441L0,61.441L0,61.441z M42.48,51.182c-1.962-1.909-5.101-1.865-7.009,0.097 s-1.865,5.101,0.097,7.009l22.521,21.839l3.456-3.553l-3.46,3.568c1.971,1.911,5.117,1.862,7.029-0.108 c0.055-0.058,0.109-0.115,0.16-0.175L87.33,58.288c1.963-1.908,2.006-5.046,0.098-7.009s-5.047-2.006-7.01-0.097L61.53,69.655 L42.48,51.182L42.48,51.182z"/></g></svg></div>
            <div class="button" id="right"><?xml version="1.0" encoding="utf-8"?><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="40px" height="40px" viewBox="0 0 122.88 122.88" enable-background="new 0 0 122.88 122.88" xml:space="preserve"><g><path d="M61.439,0L61.439,0v0.016c-16.976,0-32.335,6.874-43.443,17.981S0.016,44.464,0.016,61.438H0v0.002l0,0h0.016 c0,16.978,6.874,32.336,17.981,43.444c11.107,11.106,26.467,17.98,43.441,17.98v0.016h0.002l0,0v-0.016 c16.977,0,32.336-6.874,43.443-17.98c11.107-11.108,17.981-26.467,17.981-43.441h0.016v-0.003l0,0h-0.016 c0-16.976-6.874-32.335-17.981-43.442S78.416,0.016,61.442,0.016V0H61.439L61.439,0z M51.181,42.479 c-1.909-1.964-1.864-5.1,0.098-7.01c1.961-1.909,5.1-1.866,7.009,0.098l21.838,22.519l-3.554,3.456l3.569-3.458 c1.91,1.971,1.862,5.116-0.108,7.027c-0.057,0.057-0.115,0.109-0.175,0.161L58.288,87.329c-1.909,1.963-5.048,2.007-7.009,0.097 c-1.962-1.907-2.007-5.045-0.098-7.009l18.473-18.889L51.181,42.479L51.181,42.479z"/></g></svg></div>
        </div>
    </div>

    <script>
       document.addEventListener('DOMContentLoaded', () => {
            const circle = document.getElementById('circle');
            const messageBox = document.getElementById('message-box');
            const buttons = document.querySelectorAll('.button');
            const squares = document.querySelectorAll('.square');
            let squaresTouched = 0;
            let moveInterval = null;
            let speed = 8;
            let congratulatoryTimeout = null;
            let gameCompleted = false;

            function doRectanglesIntersect(rect1, rect2) {
                return !(rect1.right < rect2.left ||
                    rect1.left > rect2.right ||
                    rect1.bottom < rect2.top ||
                    rect1.top > rect2.bottom);
            }

            buttons.forEach(button => {
                button.addEventListener('mousedown', () => {
                    if (gameCompleted) return;
                    startMoving(button.id);
                });
                button.addEventListener('touchstart', () => {
                    if (gameCompleted) return;
                    startMoving(button.id);
                });
                button.addEventListener('mouseup', stopMoving);
                button.addEventListener('mouseleave', stopMoving);
                button.addEventListener('touchend', stopMoving);
                button.addEventListener('touchcancel', stopMoving);
            });

            document.addEventListener('keydown', (event) => {
                if (gameCompleted) return;
                const key = event.key;
                const direction = getDirectionFromKey(key);
                if (direction) startMoving(direction);
            });

            document.addEventListener('keyup', (event) => {
                const key = event.key;
                const direction = getDirectionFromKey(key);
                if (direction) stopMoving();
            });

            function getDirectionFromKey(key) {
                switch (key) {
                    case 'ArrowUp':
                    case 'w':
                        return 'up';
                    case 'ArrowDown':
                    case 's':
                        return 'down';
                    case 'ArrowLeft':
                    case 'a':
                        return 'left';
                    case 'ArrowRight':
                    case 'd':
                        return 'right';
                    default:
                        return null;
                }
            }

            function startMoving(direction) {
                if (moveInterval) clearInterval(moveInterval);
                moveCircle(direction);
                moveInterval = setInterval(() => {
                    moveCircle(direction);
                }, 50);
            }

            function stopMoving() {
                if (moveInterval) clearInterval(moveInterval);
            }

            function moveCircle(direction) {
                if (gameCompleted) return;

                const currentPosition = {
                    x: circle.offsetLeft,
                    y: circle.offsetTop
                };

                switch (direction) {
                    case 'up':
                        circle.style.top = `${Math.max(0, currentPosition.y - speed)}px`;
                        break;
                    case 'down':
                        circle.style.top = `${Math.min(window.innerHeight - circle.offsetHeight, currentPosition.y + speed)}px`;
                        break;
                    case 'left':
                        circle.style.left = `${Math.max(0, currentPosition.x - speed)}px`;
                        break;
                    case 'right':
                        circle.style.left = `${Math.min(window.innerWidth - circle.offsetWidth, currentPosition.x + speed)}px`;
                        break;
                    default:
                        break;
                }

                checkCollision();
            }

            function checkCollision() {
                const circleRect = circle.getBoundingClientRect();
                let messageDisplayed = false;

                squares.forEach(square => {
                    const squareRect = square.getBoundingClientRect();

                    if (doRectanglesIntersect(circleRect, squareRect)) {
                        if (!square.classList.contains('touched')) {
                            square.classList.add('touched');
                            squaresTouched++;
                        }
                        const message = square.getAttribute('data-message');
                        messageBox.innerHTML = message; 
                        messageBox.style.display = 'block';
                        messageBox.style.width = '70%';

                        messageDisplayed = true;
                    }
                });

                if (!messageDisplayed) {
                    messageBox.style.display = 'none';
                }

                if (squaresTouched === squares.length && !congratulatoryTimeout) {
                    congratulatoryTimeout = setTimeout(showCongratulatoryMessage, 139000);
                }
            }

            function showCongratulatoryMessage() {
                gameCompleted = true;
                messageBox.innerHTML = '🎉 Congratulations on completing the "2 Minute PC Assembly Guide" by @mryeester video! 🎉<br>You have just unlocked a whole new level of PC building prowess in just a fraction of the time it takes most people. Your dedication to learning and mastering the art of PC assembly is truly commendable.<br>With this knowledge under your belt, you are now equipped to tackle any PC build with confidence and finesse. Whether you are upgrading your own rig or helping out a friend, your skills are sure to impress.<br>';
                const continueButton = document.createElement('button');
                continueButton.innerText = 'Continue';
                continueButton.addEventListener('click', () => {
                    window.location.href = 'virtualbuild-quiz.html';
                });
                const refreshButton = document.createElement('button');
                refreshButton.innerText = 'Relearn';
                refreshButton.addEventListener('click', () => {
                    window.location.reload();
                });
                messageBox.appendChild(continueButton);
                messageBox.appendChild(refreshButton);
                messageBox.style.display = 'block';
            }
        });
    </script>
</body>
</html>
